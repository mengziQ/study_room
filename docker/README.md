# Dockerを使う  
Dockerの操作に関する備忘録です。つまったところだけメモしています。  

## 参考サイト
- [機械学習ではじめるDocker](https://gink03.github.io/Docker/)  
- [Dockerについて基本から最近追加された機能までまとめ](https://qiita.com/yuki_ycino/items/b94ae2bf7d78685cd6f5)  
- [Dockerコンテナの作成、起動〜停止まで](https://qiita.com/kooohei/items/0e788a2ce8c30f9dba53)  
- [Dockerでイメージをインポート・エクスポートする](http://uxmilk.jp/55512)  

## 作成・起動

### コンテナの作成    
コンテナを作成してubuntuのbashを立ち上げる  
```
$ docker run -it ubuntu bash
```
### イメージファイルから新規にコンテナを作成する  
```
$ docker run -it [REPOSITORY] bash
```
### -pオプションで、外部からアクセスされるポート番号:コンテナ側のポート番号を指定  
```
$ docker run -p [inbound]:[outbound] -it [ImageID] bash
```

### 既存のコンテナの起動  
docker ps などで表示された既存のコンテナについて、「docker start [コンテナID]」で起動させてからbashを開きたいとき以下を実行する。  
(起動してbashを開くことをログインというようだ)
```
$ docker attach [コンテナID]
```

### 停止しているコンテナも確認したいとき  
```
$ docker ps -a
```
## コミット  
コンテナをコミットする。コンテナIDをリポジトリ名のイメージとしてコミットする。  
```
docker commit [コンテナID] [リポジトリ名]
```

## 出力  
### イメージの出力  
出力ファイルはtar形式が一般的？
```
$ docker save [イメージ名] > [出力ファイル名]
```

### コンテナの出力    
出力ファイルは同じくtar形式が一般的。イメージファイルよりコンテナの方が容量は小さい。  
```
$ docker export [コンテナID/コンテナ名] > [出力ファイル名] 
```

## 取り込み  
### イメージの取り込み  
イメージを取り込むと画面上は何も起こらないが、docker imagesで確認できるようになる。これでログインできる。  
```
$ docker load < [ファイル名]
```

### コンテナの取り込み  
イメージと同じく、画面上は何も起こらないがdocker ps(-a)で確認できるようになる。これでログインできる。  
```
$ docker import [ファイル名]
```

## 削除  
### イメージの削除  
起動されているイメージを削除しようとするとエラーになったきがするので削除前に停止した方がいいかも  
```
$ docker rmi [イメージID]
```

### コンテナの削除
イメージと同じく起動されているt(以下略)  
一括削除の方法もあるようなので、必要であればググってください。  
```
$ docker rm [コンテナID]
```

## コピー  
### ローカルからコンテナ内にファイルをコピー  
```
$ docker cp [ファイルパス] [コンテナID]:[コピー先パス]  
```

